---
title: Windows手工修改路由表
toc: true

tags:
  - 网络
date: 2016-06-12 18:49:09
---
当电脑开启VPN后，局域网内远程桌面连接就会失效，因为此时电脑所有网络都走VPN连接，走VPN后不再是一个局域网的地址了。要解决这个问题，可以手工控制路由表，实现远程桌面连接。
<!-- more -->
例如，有A，B两台电脑在同一个局域网。B通过A的本地连接的IP地址可以远程到A，这时候A拨号上网之后获得一个新的IP，B能通过这个新的IP连接到A，但是通过本地连接连接不到了。
这时候可以修改A的路由表，让B通过A的本地连接IP地址连接A，这样可以实现A无论上不上外网，B都可以远程到A，不管A的网络环境如何变化。
以管理员身份运行`cmd`
``` bash
route add 172.23.0.0 mask 255.255.0.0 172.24.8.1 -p
```
<!-- more -->
B 的IP地址所在的子网是 172.23.0.
A 的出口网关地址是172.24.8.1
-p 是永久加入路由表，即使机器重启，如果只是临时使用，不用加参数-p

## 路由操作常用命令
``` bash
route print 打印当前路由表
route add  添加一条路由
route delete 删除一条路由
route change 修改一条现有的路由
route /? 查看该命令的帮助文件
```
